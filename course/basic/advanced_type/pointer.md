---
outline: deep
---

# æŒ‡é’ˆ

> ä½œä¸ºä¸€é—¨ low level è¯­è¨€ï¼ŒZig è‡ªç„¶æ”¯æŒæŒ‡é’ˆã€‚

æŒ‡é’ˆæ˜¯æŒ‡å‘ä¸€å—å†…å­˜åŒºåŸŸåœ°å€çš„å˜é‡ï¼Œå®ƒå­˜å‚¨äº†ä¸€ä¸ªåœ°å€ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æŒ‡é’ˆæ¥æ“ä½œå…¶æŒ‡å‘å†…å­˜åŒºåŸŸã€‚

**å–åœ°å€**ï¼šé€šè¿‡ `&` ç¬¦å·æ¥è·å–æŸä¸ªå˜é‡æ‰€å¯¹åº”çš„å†…å­˜åœ°å€ï¼Œå¦‚ `&integer` å°±æ˜¯è·å–å˜é‡ `integer` çš„å†…å­˜åœ°å€ã€‚

ä¸ C ä¸åŒï¼ŒZig ä¸­çš„æŒ‡é’ˆç±»å‹è¦åˆ†ä¸ºä¸¤ç§ï¼ˆä¸€ç§æ˜¯å•é¡¹æŒ‡é’ˆï¼Œä¸€ç§æ˜¯å¤šé¡¹æŒ‡é’ˆï¼‰ï¼Œå®ƒä»¬ä¸»è¦æ˜¯å¯¹æŒ‡å‘çš„å…ƒç´ åšäº†åŒºåˆ†ï¼Œä¾¿äºæ›´å¥½åœ°ä½¿ç”¨ã€‚ä¸‹å›¾å±•ç¤ºäº†å®ƒä»¬æŒ‡å‘å…ƒç´ çš„ä¸åŒï¼š

![pointer representation](/picture/basic/pointer-representation.svg)

:::info ğŸ…¿ï¸ æç¤º

ä¸Šå›¾ä¸­åŒ…å«äº†åˆ‡ç‰‡ï¼ˆsliceï¼‰ç±»å‹ï¼Œä¸¥æ ¼æ¥è¯´å®ƒä¸æ˜¯æŒ‡é’ˆï¼Œä½†å…¶æ˜¯ç”±æŒ‡é’ˆæ„æˆçš„ï¼ˆä¸€èˆ¬ç§°ä¸ºèƒ–æŒ‡é’ˆï¼‰ï¼Œè€Œä¸”åœ¨ä»£ç ä¸­ç”¨çš„æ›´ä¸ºæ™®éï¼Œå› æ­¤åˆ—åœ¨ä¸€èµ·ä¾¿äºè¯»è€…æ¯”è¾ƒã€‚

:::

:::warning å…³äºæŒ‡é’ˆè¿ç®—

zig æœ¬èº«æ”¯æŒæŒ‡é’ˆè¿ç®—ï¼ˆåŠ å‡æ“ä½œï¼‰ï¼Œä½†æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼šæœ€å¥½å°†æŒ‡é’ˆåˆ†é…ç»™ `[*]T` ç±»å‹åå†è¿›è¡Œè®¡ç®—ã€‚

å°¤å…¶æ˜¯åœ¨åˆ‡ç‰‡ä¸­ï¼Œä¸å¯ç›´æ¥å¯¹å…¶æŒ‡é’ˆè¿›è¡Œæ›´æ”¹ï¼Œè¿™ä¼šç ´ååˆ‡ç‰‡çš„å†…éƒ¨ç»“æ„ï¼

:::

## å•é¡¹æŒ‡é’ˆ

å•é¡¹æŒ‡é’ˆæŒ‡å‘å•ä¸ªå…ƒç´ ã€‚

å•é¡¹æŒ‡é’ˆçš„ç±»å‹ä¸ºï¼š`*T`ï¼Œ`T`æ˜¯æ‰€æŒ‡å‘å†…å­˜åŒºåŸŸçš„ç±»å‹ï¼Œè§£å¼•ç”¨æ–¹æ³•æ˜¯ `ptr.*`ã€‚

<<<@/code/release/pointer.zig#single_pointer

å•é¡¹æŒ‡é’ˆæœ¬èº«æ”¯æŒä»¥ä¸‹æ“ä½œï¼š

- è§£å¼•ç”¨è¯­æ³• `ptr.*`
- åˆ‡ç‰‡è¯­æ³• `ptr[0..1]`
- æŒ‡é’ˆå‡æ³• `ptr - ptr`

:::info ğŸ…¿ï¸ æç¤º

å‡½æ•°æŒ‡é’ˆç•¥æœ‰ç‰¹æ®Šï¼š

<<<@/code/release/pointer.zig#fn_pointer

:::

## å¤šé¡¹æŒ‡é’ˆ

å¤šé¡¹æŒ‡é’ˆæŒ‡å‘æœªçŸ¥æ•°é‡çš„å¤šä¸ªå…ƒç´ ã€‚

å¤šé¡¹æŒ‡é’ˆçš„ç±»å‹ä¸ºï¼š`[*]T`ï¼Œ`T`æ˜¯æ‰€æŒ‡å‘å†…å­˜åŒºåŸŸçš„ç±»å‹ï¼Œä¸”è¯¥ç±»å‹å¿…é¡»å…·æœ‰æ˜ç¡®çš„å¤§å°ï¼ˆè¿™æ„å‘³ç€å®ƒä¸èƒ½æ˜¯ [`anyopaque`](https://ziglang.org/documentation/master/#toc-C-Type-Primitives) å’Œå…¶ä»–ä»»æ„[ä¸é€æ˜ç±»å‹](https://ziglang.org/documentation/master/#opaque)ï¼‰ã€‚

è§£å¼•ç”¨æ–¹æ³•æ”¯æŒä»¥ä¸‹å‡ ç§ï¼š

- ç´¢å¼•è¯­æ³• `ptr[i]`
- åˆ‡ç‰‡è¯­æ³• `ptr[start..end]` å’Œ `ptr[start..]`
- æŒ‡é’ˆè¿ç®— `ptr + int`, `ptr - int`
- æŒ‡é’ˆå‡æ³• `ptr - ptr`

<<<@/code/release/pointer.zig#multi_pointer

:::info ğŸ…¿ï¸ æç¤º

æ•°ç»„å’Œåˆ‡ç‰‡éƒ½ä¸æŒ‡é’ˆæœ‰ç´§å¯†çš„è”ç³»ã€‚

`*[N]T`ï¼šè¿™æ˜¯æŒ‡å‘ä¸€ä¸ªæ•°ç»„çš„å•é¡¹æŒ‡é’ˆï¼Œæ•°ç»„çš„é•¿åº¦ä¸º Nã€‚ä¹Ÿå¯ä»¥å°†å…¶ç†è§£ä¸ºæŒ‡å‘ N ä¸ªå…ƒç´ çš„æŒ‡é’ˆã€‚

æ”¯æŒè¿™äº›è¯­æ³•ï¼š

- ç´¢å¼•è¯­æ³•ï¼š`array_ptr[i]`
- åˆ‡ç‰‡è¯­æ³•ï¼š`array_ptr[start..end]`
- `len` å±æ€§ï¼š`array_ptr.len`
- æŒ‡é’ˆå‡æ³•ï¼š`array_ptr - array_ptr`

`[]T`ï¼šè¿™æ˜¯åˆ‡ç‰‡ï¼Œç›¸å½“äºä¸€ä¸ªèƒ–æŒ‡é’ˆï¼ŒåŒ…å«äº†ä¸€ä¸ªç±»å‹ä¸º `[*]T` çš„æŒ‡é’ˆå’Œä¸€ä¸ªé•¿åº¦ã€‚

æ”¯æŒè¿™äº›è¯­æ³•ï¼š

- ç´¢å¼•è¯­æ³•ï¼š`slice[i]`
- åˆ‡ç‰‡è¯­æ³•ï¼š`slice[start..end]`
- `len` å±æ€§ï¼š`slice.len`
  æ•°ç»„æŒ‡é’ˆçš„ç±»å‹ä¸­å°±åŒ…å«äº†é•¿åº¦ä¿¡æ¯ï¼Œè€Œåˆ‡ç‰‡ä¸­åˆ™å®é™…å­˜å‚¨ç€é•¿åº¦ã€‚æ•°ç»„æŒ‡é’ˆå’Œåˆ‡ç‰‡çš„é•¿åº¦éƒ½å¯ä»¥é€šè¿‡ `len` å±æ€§æ¥è·å–ã€‚

:::details ç¤ºä¾‹

<<<@/code/release/pointer.zig#array_and_slice

:::

### å“¨å…µæŒ‡é’ˆï¼ˆæ ‡è®°ç»ˆæ­¢æŒ‡é’ˆï¼‰

:::info

æœ¬è´¨ä¸Šæ¥è¯´ï¼Œè¿™æ˜¯ä¸ºäº†å…¼å®¹ C ä¸­çš„è§„å®šçš„å­—ç¬¦ä¸²ç»“å°¾å­—ç¬¦`\0`

:::

å“¨å…µæŒ‡é’ˆå°±å’Œå“¨å…µæ•°ç»„ç±»ä¼¼ï¼Œæˆ‘ä»¬ä½¿ç”¨è¯­æ³• `[*:x]T`ï¼Œè¿™ä¸ªæŒ‡é’ˆæ ‡è®°äº†è¾¹ç•Œçš„å€¼ï¼Œæ•…ç§°ä¸ºâ€œå“¨å…µâ€ã€‚

å®ƒçš„é•¿åº¦æœ‰æ ‡è®°å€¼ `x` æ¥ç¡®å®šï¼Œè¿™æ ·åšçš„å¥½å¤„å°±æ˜¯æä¾›äº†é’ˆå¯¹ç¼“å†²åŒºæº¢å‡ºå’Œè¿‡åº¦è¯»å–çš„ä¿æŠ¤ã€‚

:::details ç¤ºä¾‹

æˆ‘ä»¬æ¥ä¸‹æ¥æ¼”ç¤ºä¸€ä¸ªç¤ºä¾‹ï¼Œè¯¥ç¤ºä¾‹ä¸­ä½¿ç”¨äº† zig å¯ä»¥æ— ç¼ä¸ C äº¤äº’çš„ç‰¹æ€§ï¼Œæ•…ä½ å¯ä»¥æš‚æ—¶ç•¥è¿‡è¿™é‡Œï¼

<<<@/code/release/pointer.zig#st_pointer

ä»¥ä¸Šä»£ç ç¼–è¯‘éœ€è¦é¢å¤–è¿æ¥ libcï¼Œä½ åªéœ€è¦åœ¨ä½ çš„ `build.zig` ä¸­æ·»åŠ  `exe.linkLibC();` å³å¯ã€‚

:::

## å¤šé¡¹æŒ‡é’ˆå’Œå•å‘æŒ‡é’ˆåŒºåˆ«

æœ¬éƒ¨åˆ†ä¸“é—¨ç”¨äºè§£é‡Šå¹¶åŒºåˆ«å•å‘æŒ‡é’ˆå’Œå¤šé¡¹æŒ‡é’ˆï¼

å…ˆåˆ—å‡ºä»¥ä¸‹ç±»å‹ï¼š

- `[4] const u8`

è¯¥ç±»å‹ä»£è¡¨çš„æ˜¯ä¸€ä¸ªé•¿åº¦ä¸º 4 çš„æ•°ç»„ï¼Œæ•°ç»„å†…çš„å…ƒç´ ç±»å‹ä¸º `const u8`ã€‚

- `[] const u8`

è¯¥ç±»å‹ä»£è¡¨çš„æ˜¯ä¸€ä¸ªåˆ‡ç‰‡ï¼Œåˆ‡ç‰‡å†…å…ƒç´ ç±»å‹ä¸º `const u8`ã€‚

- `*[4] const u8`

è¯¥ç±»å‹ä»£è¡¨çš„æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œå®ƒæŒ‡å‘ä¸€ä¸ªå†…å­˜åœ°å€ï¼Œå†…å­˜ä¸­è¯¥åœ°å€å­˜å‚¨ç€ä¸€ä¸ªé•¿åº¦ä¸º 4 çš„æ•°ç»„ï¼Œæ•°ç»„å†…çš„å…ƒç´ ç±»å‹ä¸º `const u8`ã€‚

- `*[] const u8`

è¯¥ç±»å‹ä»£è¡¨çš„æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œå®ƒæŒ‡å‘ä¸€ä¸ªå†…å­˜åœ°å€ï¼Œå†…å­˜ä¸­è¯¥åœ°å€å­˜å‚¨ç€ä¸€ä¸ªåˆ‡ç‰‡ã€‚

- `[*] const u8`

è¯¥ç±»å‹ä»£è¡¨çš„æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œå®ƒæŒ‡å‘ä¸€ä¸ªå†…å­˜åœ°å€ï¼Œå†…å­˜ä¸­è¯¥åœ°å€å­˜å‚¨ç€ä¸€ä¸ªæ•°ç»„ï¼Œä½†é•¿åº¦æœªçŸ¥ï¼ï¼

å…¶ä¸­ `[*] const u8` å¯ä»¥çœ‹ä½œæ˜¯ C ä¸­çš„ `* const char`ï¼Œè¿™æ˜¯å› ä¸ºåœ¨ C è¯­è¨€ä¸­ä¸€ä¸ªæ™®é€šçš„æŒ‡é’ˆä¹Ÿå¯ä»¥æŒ‡å‘ä¸€ä¸ªæ•°ç»„ï¼Œzig ä»…ä»…æ˜¯å•ç‹¬æŠŠè¿™ç§ä»¤äººè¿·æƒ‘çš„è¡Œä¸ºå•ç‹¬ä½œä¸ºä¸€ä¸ªè¯­æ³•è€Œå·²ï¼

## æŒ‡é’ˆå’Œæ•´æ•°äº’è½¬

[`@ptrFromInt`](https://ziglang.org/documentation/master/#ptrFromInt) å¯ä»¥å°†æ•´æ•°åœ°å€è½¬æ¢ä¸ºæŒ‡é’ˆï¼Œ[`@intFromPtr`](https://ziglang.org/documentation/master/#intFromPtr) å¯ä»¥å°†æŒ‡é’ˆè½¬æ¢ä¸ºæ•´æ•°ï¼š

<<<@/code/release/pointer.zig#ptr2int

## æŒ‡é’ˆå¼ºåˆ¶è½¬æ¢

å†…ç½®å‡½æ•° [`@ptrCast`](https://ziglang.org/documentation/master/#ptrCast) å¯ä»¥å°†å°†æŒ‡é’ˆçš„å…ƒç´ ç±»å‹è½¬æ¢ä¸ºå¦ä¸€ç§ç±»å‹ï¼Œä¹Ÿå°±æ˜¯ä¸åŒç±»å‹çš„æŒ‡é’ˆå¼ºåˆ¶è½¬æ¢ã€‚

ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåº”å½“å°½é‡é¿å…ä½¿ç”¨ `@ptrCast`ï¼Œè¿™ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æŒ‡é’ˆï¼Œæ ¹æ®é€šè¿‡å®ƒçš„åŠ è½½å’Œå­˜å‚¨æ“ä½œï¼Œå¯èƒ½å¯¼è‡´æ— æ³•æ£€æµ‹çš„éæ³•è¡Œä¸ºã€‚

<<<@/code/release/pointer.zig#ptr_cast

## é¢å¤–ç‰¹æ€§

ä»¥ä¸‹çš„æ˜¯æŒ‡é’ˆçš„é¢å¤–ç‰¹æ€§ï¼Œåˆå­¦è€…å¯ä»¥ç›´æ¥ç•¥è¿‡ä»¥ä¸‹éƒ¨åˆ†ï¼Œç­‰åˆ°ä½ éœ€è¦æ—¶å†æ¥å­¦ä¹ å³å¯ï¼

### `volatile`

> å¦‚æœä¸çŸ¥é“ä»€ä¹ˆæ˜¯æŒ‡é’ˆæ“ä½œçš„â€œ_å‰¯ä½œç”¨_â€ï¼Œé‚£ä¹ˆè¿™é‡Œä½ å¯ä»¥ç•¥è¿‡ï¼Œç­‰ä½ éœ€è¦æ—¶å†æ¥æŸ¥çœ‹ï¼

å¯¹æŒ‡é’ˆçš„æ“ä½œåº”å‡å®šä¸ºæ²¡æœ‰å‰¯ä½œç”¨ã€‚å¦‚æœå­˜åœ¨å‰¯ä½œç”¨ï¼Œä¾‹å¦‚ä½¿ç”¨å†…å­˜æ˜ å°„è¾“å…¥è¾“å‡ºï¼ˆMemory Mapped Input/Outputï¼‰ï¼Œåˆ™éœ€è¦ä½¿ç”¨ `volatile` å…³é”®å­—æ¥ä¿®é¥°ã€‚

åœ¨ä»¥ä¸‹ä»£ç ä¸­ï¼Œä¿è¯ä½¿ç”¨ `mmio_ptr` çš„å€¼è¿›è¡Œæ“ä½œï¼ˆè¿™é‡Œä½ çœ‹èµ·æ¥å¯èƒ½ä¼šæ„Ÿåˆ°è¿·æƒ‘ï¼Œåœ¨ç¼–è¯‘ä»£ç æ—¶ï¼Œç¼–è¯‘å™¨å¯ä»¥èƒ½ä¼šè®©å€¼åœ¨å®é™…è¿è¡Œè¿‡ç¨‹ä¸­è¿›è¡Œç¼“å­˜ï¼Œè¿™é‡Œä¿è¯æ¯æ¬¡éƒ½ä½¿ç”¨ `mmio_ptr` çš„å€¼ï¼Œä»¥ç¡®ä¿æ­£ç¡®è§¦å‘â€œå‰¯ä½œç”¨â€ï¼‰ï¼Œå¹¶ä¿è¯äº†ä»£ç æ‰§è¡Œçš„é¡ºåºã€‚

<<<@/code/release/pointer.zig#volatile

è¯¥èŠ‚å†…å®¹ï¼Œæ­¤å¤„ä»…ä»…è®²è¿°äº†å°‘é‡å†…å®¹ï¼Œå¦‚æœè¦äº†è§£æ›´å¤šï¼Œä½ å¯èƒ½éœ€è¦æŸ¥çœ‹[å®˜æ–¹æ–‡æ¡£](https://ziglang.org/documentation/master/#toc-volatile)ï¼

### å¯¹é½

> å¦‚æœä½ ä¸çŸ¥é“å†…å­˜å¯¹é½çš„å«ä¹‰æ˜¯ä»€ä¹ˆï¼Œé‚£ä¹ˆæœ¬èŠ‚å†…å®¹ä½ å¯ä»¥è·³è¿‡äº†ï¼Œç­‰åˆ°ä½ éœ€è¦æ—¶å†æ¥æŸ¥çœ‹ï¼

æ¯ç§ç±»å‹éƒ½æœ‰ä¸€ä¸ªå¯¹é½æ–¹å¼â€”â€”ä¹Ÿå°±æ˜¯æ•°ä¸ªå­—èŠ‚ï¼Œè¿™æ ·ï¼Œå½“ä»å†…å­˜åŠ è½½æˆ–å­˜å‚¨è¯¥ç±»å‹çš„å€¼æ—¶ï¼Œå†…å­˜åœ°å€å¿…é¡»èƒ½è¢«è¯¥æ•°å­—æ•´é™¤ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `@alignOf` æ‰¾å‡ºä»»ä½•ç±»å‹çš„å†…å­˜å¯¹é½å¤§å°ã€‚

å†…å­˜å¯¹é½å¤§å°å–å†³äº CPU æ¶æ„ï¼Œä½†å§‹ç»ˆæ˜¯ 2 çš„å¹‚ï¼Œå¹¶ä¸”å°äº 1 << 29ã€‚
:::info

`align(0)` è¡¨æ„æ˜¯ï¼šæ— éœ€å¯¹é½ï¼Œè¿™åœ¨é«˜æ€§èƒ½ã€å†…å­˜ç´§è¿«åœºæ™¯ä¸‹ç”¨å¤„å¾ˆå¤§ã€‚
å‚è€ƒï¼š[allow align(0) on struct fields](https://github.com/ziglang/zig/issues/3802)

:::

åœ¨ Zig ä¸­ï¼ŒæŒ‡é’ˆç±»å‹å…·æœ‰å¯¹é½å€¼ã€‚å¦‚æœè¯¥å€¼ç­‰äºåŸºç¡€ç±»å‹çš„å¯¹é½æ–¹å¼ï¼Œåˆ™å¯ä»¥ä»ç±»å‹ä¸­çœç•¥å®ƒï¼š

<<<@/code/release/pointer.zig#align

:::info ğŸ…¿ï¸ æç¤º

å’Œ `*i32` ç±»å‹å¯ä»¥å¼ºåˆ¶è½¬æ¢ä¸º `*const i32` ç±»å‹ç±»ä¼¼ï¼Œå…·æœ‰è¾ƒå¤§å¯¹é½å¤§å°çš„æŒ‡é’ˆå¯ä»¥éšå¼è½¬æ¢ä¸ºå…·æœ‰è¾ƒå°å¯¹é½å¤§å°çš„æŒ‡é’ˆï¼Œä½†åä¹‹åˆ™ä¸ç„¶ã€‚

å¦‚æœæœ‰ä¸€ä¸ªæŒ‡é’ˆæˆ–åˆ‡ç‰‡çš„å¯¹é½æ–¹å¼è¾ƒå°ï¼Œä½†çŸ¥é“å®ƒå®é™…ä¸Šå…·æœ‰è¾ƒå¤§çš„å¯¹é½æ–¹å¼ï¼Œè¯·ä½¿ç”¨ `@alignCast` å°†æŒ‡é’ˆæ›´æ”¹ä¸ºæ›´å¯¹é½çš„æŒ‡é’ˆï¼Œä¾‹å¦‚ï¼š`@as([]align(4) u8, @alignCast(slice4))`ï¼Œè¿™åœ¨è¿è¡Œæ—¶æ— æ“ä½œï¼Œä½†æ’å…¥äº†å®‰å…¨æ£€æŸ¥ã€‚

:::details ç¤ºä¾‹

<<<@/code/release/pointer.zig#align_cast

:::

å¦‚æœæœ‰ä¸€ä¸ªæŒ‡é’ˆæˆ–åˆ‡ç‰‡ï¼Œå®ƒçš„å¯¹é½å¾ˆå°ï¼Œä½†æˆ‘ä»¬çŸ¥é“å®ƒå®é™…ä¸Šæœ‰ä¸€ä¸ªæ›´å¤§çš„å¯¹é½ï¼Œé‚£ä¹ˆä½¿ç”¨ [`@alignCast`](https://ziglang.org/documentation/master/#alignCast) è®©å…¶ `align` æ›´å¤§ã€‚åœ¨è¿è¡Œæ—¶æ˜¯æ— æ“ä½œçš„ï¼Œä½†ä¼šé¢å¤–åŠ å…¥ä¸€ä¸ª [å®‰å…¨æ£€æŸ¥](https://ziglang.org/documentation/master/#Incorrect-Pointer-Alignment)ï¼š

> ä¾‹å¦‚è¿™æ®µä»£ç å°±æ˜¯é”™è¯¯çš„ï¼Œä¸ä¼šè¢«æ­£å¸¸æ‰§è¡Œ

```zig
const std = @import("std");

test "pointer alignment safety" {
    var array align(4) = [_]u32{ 0x11111111, 0x11111111 };
    const bytes = std.mem.sliceAsBytes(array[0..]);
    try std.testing.expect(foo(bytes) == 0x11111111);
}
fn foo(bytes: []u8) u32 {
    const slice4 = bytes[1..5];
    const int_slice = std.mem.bytesAsSlice(u32, @as([]align(4) u8, @alignCast(slice4)));
    return int_slice[0];
}
```

```sh
$ zig test test_incorrect_pointer_alignment.zig
1/1 test_incorrect_pointer_alignment.test.pointer alignment safety...thread 958173 panic: incorrect alignment
/home/ci/actions-runner/_work/zig-bootstrap/zig/doc/langref/test_incorrect_pointer_alignment.zig:10:68: 0x1048962 in foo (test)
    const int_slice = std.mem.bytesAsSlice(u32, @as([]align(4) u8, @alignCast(slice4)));
                                                                   ^
/home/ci/actions-runner/_work/zig-bootstrap/zig/doc/langref/test_incorrect_pointer_alignment.zig:6:31: 0x104880f in test.pointer alignment safety (test)
    try std.testing.expect(foo(bytes) == 0x11111111);
                              ^
/home/ci/actions-runner/_work/zig-bootstrap/out/host/lib/zig/compiler/test_runner.zig:214:25: 0x10efab9 in mainTerminal (test)
        if (test_fn.func()) |_| {
                        ^
/home/ci/actions-runner/_work/zig-bootstrap/out/host/lib/zig/compiler/test_runner.zig:62:28: 0x10e7ead in main (test)
        return mainTerminal();
                           ^
/home/ci/actions-runner/_work/zig-bootstrap/out/host/lib/zig/std/start.zig:647:22: 0x10e7430 in posixCallMainAndExit (test)
            root.main();
                     ^
/home/ci/actions-runner/_work/zig-bootstrap/out/host/lib/zig/std/start.zig:271:5: 0x10e6ffd in _start (test)
    asm volatile (switch (native_arch) {
    ^
???:?:?: 0x0 in ??? (???)
error: the following test command crashed:
/home/ci/actions-runner/_work/zig-bootstrap/out/zig-local-cache/o/608e4a8451ecb0974638281c85927599/test --seed=0x9bc870fd
```

### é›¶æŒ‡é’ˆ

é›¶æŒ‡é’ˆå®é™…ä¸Šæ˜¯ä¸€ä¸ªæœªå®šä¹‰çš„é”™è¯¯è¡Œä¸ºï¼ˆ[Pointer Cast Invalid Null](https://ziglang.org/documentation/master/#Pointer-Cast-Invalid-Null)ï¼‰ï¼Œä½†æ˜¯å½“æˆ‘ä»¬ç»™æŒ‡é’ˆå¢åŠ ä¸Š `allowzero` ä¿®é¥°ç¬¦åï¼Œå®ƒå°±å˜æˆåˆæ³•çš„è¡Œä¸ºäº†ï¼

:::warning å…³äºé›¶æŒ‡é’ˆçš„ä½¿ç”¨

è¯·åªåœ¨ç›®æ ‡ OS ä¸º `freestanding` æ—¶ä½¿ç”¨é›¶æŒ‡é’ˆï¼Œå¦‚æœæƒ³è¡¨ç¤º `null` æŒ‡é’ˆï¼Œè¯·ä½¿ç”¨[å¯é€‰ç±»å‹](/basic/optional_type)ï¼

:::

<<<@/code/release/pointer.zig#zero_pointer

### ç¼–è¯‘æœŸ

åªè¦ä»£ç ä¸ä¾èµ–äºæœªå®šä¹‰çš„å†…å­˜å¸ƒå±€ï¼Œé‚£ä¹ˆæŒ‡é’ˆä¹Ÿå¯ä»¥åœ¨ç¼–è¯‘æœŸå‘æŒ¥ä½œç”¨ï¼

<<<@/code/release/pointer.zig#comptime_pointer

åªè¦æŒ‡é’ˆä»æœªè¢«å–æ¶ˆå¼•ç”¨ï¼ŒZig å°±èƒ½å¤Ÿä¿ç•™ `comptime` ä»£ç ä¸­çš„å†…å­˜åœ°å€ï¼š

<<<@/code/release/pointer.zig#comp_pointer

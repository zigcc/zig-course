---
outline: deep
---

# æ•°ç»„

æ•°ç»„æ˜¯æ—¥å¸¸æ•²ä»£ç ä½¿ç”¨ç›¸å½“é¢‘ç¹çš„ç±»å‹ä¹‹ä¸€ï¼Œåœ¨ zig ä¸­ï¼Œæ•°ç»„çš„åˆ†é…å’Œ C ç±»ä¼¼ï¼Œå‡æ˜¯åœ¨å†…å­˜ä¸­è¿ç»­åˆ†é…ä¸”å›ºå®šæ•°é‡çš„ç›¸åŒç±»å‹å…ƒç´ ã€‚

å› æ­¤æ•°ç»„æœ‰ä»¥ä¸‹ä¸‰ç‚¹ç‰¹æ€§ï¼š

- é•¿åº¦å›ºå®š
- å…ƒç´ å¿…é¡»æœ‰ç›¸åŒçš„ç±»å‹
- ä¾æ¬¡çº¿æ€§æ’åˆ—

## åˆ›å»ºæ•°ç»„

åœ¨ zig ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹çš„æ–¹æ³•ï¼Œæ¥å£°æ˜å¹¶å®šä¹‰ä¸€ä¸ªæ•°ç»„ï¼š

```zig
const print = @import("std").debug.print;

pub fn main() !void {
    const message = [5]u8{ 'h', 'e', 'l', 'l', 'o' };
    // const message = [_]u8{ 'h', 'e', 'l', 'l', 'o' };
    print("{s}\n", .{message}); // hello
    print("{s}\n", .{message[0]}); // h
}
```

ä»¥ä¸Šä»£ç å±•ç¤ºäº†å®šä¹‰ä¸€ä¸ªå­—é¢é‡æ•°ç»„çš„æ–¹å¼ï¼Œå…¶ä¸­ä½ å¯ä»¥é€‰æ‹©æŒ‡æ˜æ•°ç»„çš„å¤§å°æˆ–è€…ä½¿ç”¨ `_` ä»£æ›¿ã€‚ä½¿ç”¨ `_` æ—¶ï¼Œzig ä¼šå°è¯•è‡ªåŠ¨è®¡ç®—æ•°ç»„çš„é•¿åº¦ã€‚

æ•°ç»„å…ƒç´ æ˜¯è¿ç»­æ”¾ç½®çš„ï¼Œæ•…æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹æ ‡æ¥è®¿é—®æ•°ç»„çš„å…ƒç´ ï¼Œä¸‹æ ‡ç´¢å¼•ä» `0` å¼€å§‹ï¼

å…³äº[è¶Šç•Œé—®é¢˜](https://ziglang.org/documentation/0.11.0/#Index-out-of-Bounds)ï¼Œzig åœ¨ç¼–è¯‘æœŸå’Œè¿è¡Œæ—¶å‡æœ‰å®Œæ•´çš„è¶Šç•Œä¿æŠ¤å’Œå®Œå–„çš„å †æ ˆé”™è¯¯è·Ÿè¸ªã€‚

### å¤šç»´æ•°ç»„

å¤šç»´æ•°ç»„ï¼ˆçŸ©é˜µï¼‰å®é™…ä¸Šå°±æ˜¯åµŒå¥—æ•°ç»„ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“å°±å¯ä»¥åˆ›å»ºä¸€ä¸ªå¤šç»´æ•°ç»„å‡ºæ¥ï¼š

```zig
const print = @import("std").debug.print;

pub fn main() !void {
    const matrix_4x4 = [4][4]f32{
        [_]f32{ 1.0, 0.0, 0.0, 0.0 },
        [_]f32{ 0.0, 1.0, 0.0, 1.0 },
        [_]f32{ 0.0, 0.0, 1.0, 0.0 },
        [_]f32{ 0.0, 0.0, 0.0, 1.0 },
    };

    for (matrix_4x4, 0..) |arr_val, arr_index| {
        for (arr_val, 0..) |val, index| {
            print("å…ƒç´ {}-{}æ˜¯: {}\n", .{ arr_index, index, val });
        }
    }
}
```

åœ¨ä»¥ä¸Šçš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† [for](/basic/process_control/loop) å¾ªç¯ï¼Œæ¥è¿›è¡ŒçŸ©é˜µçš„æ‰“å°ï¼Œå…³äºå¾ªç¯æˆ‘ä»¬æ”¾åœ¨åé¢å†èŠã€‚

## å“¨å…µæ•°ç»„

> å¾ˆæŠ±æ­‰ï¼Œè¿™é‡Œçš„åå­—æ˜¯æ ¹æ®å®˜æ–¹çš„æ–‡æ¡£ç›´æ¥ç¿»è¯‘è¿‡æ¥çš„ï¼ŒåŸæ–‡æ¡£åº”è¯¥æ˜¯ ([Sentinel-Terminated Arrays](https://ziglang.org/documentation/0.11.0/#toc-Sentinel-Terminated-Arrays)) ã€‚

æˆ‘ä»¬ä½¿ç”¨è¯­æ³• `[N:x]T` æ¥æè¿°ä¸€ä¸ªå…ƒç´ ä¸ºç±»å‹ `T`ï¼Œé•¿åº¦ä¸º `N` çš„æ•°ç»„ï¼Œåœ¨å®ƒå¯¹åº” `N` çš„ç´¢å¼•å¤„çš„å€¼åº”è¯¥æ˜¯ `x`ã€‚å‰é¢çš„è¯´æ³•å¯èƒ½æ¯”è¾ƒå¤æ‚ï¼Œæ¢ç§è¯´æ³•ï¼Œå°±æ˜¯è¿™ä¸ªè¯­æ³•è¡¨ç¤ºæ•°ç»„çš„é•¿åº¦ç´¢å¼•å¤„çš„å…ƒç´ åº”è¯¥æ˜¯ `x`ï¼Œå…·ä½“å¯ä»¥çœ‹ä¸‹é¢çš„ç¤ºä¾‹ï¼š

```zig
const print = @import("std").debug.print;

pub fn main() !void {
    const array = [_:0]u8{ 1, 2, 3, 4 };
    print("æ•°ç»„é•¿åº¦ä¸º: {}\n", .{array.len}); // 4
    print("æ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ å€¼: {}\n", .{array[array.len - 1]}); // 4
    print("å“¨å…µå€¼ä¸º: {}\n", .{array[array.len]}); // 0
}
```

:::info ğŸ…¿ï¸ æç¤º

æ³¨æ„ï¼šåªæœ‰åœ¨ä½¿ç”¨å“¨å…µæ—¶ï¼Œæ•°ç»„æ‰ä¼šæœ‰ç´¢å¼•ä¸ºæ•°ç»„é•¿åº¦çš„å…ƒç´ ï¼

:::

## æ“ä½œ

### ä¹˜æ³•

å¯ä»¥ä½¿ç”¨ `**` å¯¹æ•°ç»„åšä¹˜æ³•æ“ä½œï¼Œè¿ç®—ç¬¦å·¦ä¾§æ˜¯æ•°ç»„ï¼Œå³ä¾§æ˜¯å€æ•°ï¼Œè¿›è¡ŒçŸ©é˜µçš„å åŠ ã€‚

```zig
const print = @import("std").debug.print;

pub fn main() !void {
    const small = [3]i8{ 1, 2, 3 };
    const big: [9]i8 = small ** 3;
    print("{any}\n", .{big});// [9]i8{ 1, 2, 3, 1, 2, 3, 1, 2, 3 }
}
```

### ä¸²è”

æ•°ç»„ä¹‹é—´å¯ä»¥ä½¿ç”¨ `++` è¿›è¡Œä¸²è”æ“ä½œï¼ˆç¼–è¯‘æœŸï¼‰ï¼Œåªè¦ä¸¤ä¸ªæ•°ç»„ç±»å‹ï¼ˆé•¿åº¦ã€å…ƒç´ ç±»å‹ï¼‰ç›¸åŒï¼Œå®ƒä»¬å°±å¯ä»¥ä¸²è”ï¼

```zig
const print = @import("std").debug.print;

pub fn main() !void {
    const part_one = [_]i32{ 1, 2, 3, 4 };
    const part_two = [_]i32{ 5, 6, 7, 8 };
    const all_of_it = part_one ++ part_two;// [_]i32{ 1, 2, 3, 4, 5, 6, 7, 8 }

    _ = all_of_it;
}
```

## å­—ç¬¦ä¸²

æˆ‘ä»¬æ”¾åœ¨è¿™é‡Œè®²è§£å­—ç¬¦ä¸²ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿ

> åœ¨ zig ä¸­ï¼Œå­—ç¬¦ä¸²æ˜¯æ²¡æœ‰ç‹¬ç«‹çš„ç±»å‹çš„ï¼Œå®ƒå°±æ˜¯ `u8` çš„æ•°ç»„ç±»å‹ï¼Œè€Œä¸”æ˜¯å“¨å…µå­—ç¬¦ä¸º 0(`null`) çš„å“¨å…µæ•°ç»„ï¼

zig ä¼šå°†å­—ç¬¦ä¸²å‡å®šä¸º UTF-8 ç¼–ç ï¼Œè¿™æ˜¯ç”±äº zig çš„æºæ–‡ä»¶æœ¬èº«å°±æ˜¯ UTF-8 ç¼–ç çš„ï¼Œä»»ä½•çš„é ASCII å­—èŠ‚å‡ä¼šè¢«ä½œä¸º UTF-8 å­—ç¬¦çœ‹å¾…ã€‚ç¼–è¯‘å™¨è¿˜ä¸ä¼šå¯¹å­—èŠ‚è¿›è¡Œä¿®æ”¹ï¼Œå› æ­¤å¦‚æœæƒ³æŠŠé UTF-8 å­—èŠ‚æ”¾å…¥å­—ç¬¦ä¸²ä¸­ï¼Œå¯ä»¥ä½¿ç”¨è½¬ä¹‰ `\xNN`ã€‚

Unicode ç ç‚¹å­—é¢é‡ç±»å‹æ˜¯ `comptime_int`ï¼Œæ‰€æœ‰çš„è½¬ä¹‰å­—ç¬¦å‡å¯ä»¥åœ¨å­—ç¬¦ä¸²å’Œ Unicode ç ç‚¹ä¸­ä½¿ç”¨ã€‚

ä¸ºäº†æ–¹ä¾¿å¤„ç† UTF-8 å’Œ Unicode ï¼Œzigçš„æ ‡å‡†åº“ `std.unicode` ä¸­å®ç°äº†ç›¸å…³çš„å‡½æ•°æ¥å¤„ç†å®ƒä»¬ã€‚

å¯ä»¥å‚ç…§ä»¥ä¸‹ç¤ºä¾‹ï¼š

```zig
const print = @import("std").debug.print;
const mem = @import("std").mem; // ç”¨äºæ¯”è¾ƒå­—èŠ‚

pub fn main() void {
    const bytes = "hello";
    print("{}\n", .{@TypeOf(bytes)});                   // *const [5:0]u8
    print("{d}\n", .{bytes.len});                       // 5
    print("{c}\n", .{bytes[1]});                        // 'e'
    print("{d}\n", .{bytes[5]});                        // 0
    print("{}\n", .{'e' == '\x65'});                    // true
    print("{d}\n", .{'\u{1f4a9}'});                     // 128169
    print("{d}\n", .{'ğŸ’¯'});                            // 128175
    print("{u}\n", .{'âš¡'});
    print("{}\n", .{mem.eql(u8, "hello", "h\x65llo")});      // true
    print("{}\n", .{mem.eql(u8, "ğŸ’¯", "\xf0\x9f\x92\xaf")}); // true
    const invalid_utf8 = "\xff\xfe";      // éUTF-8 å­—ç¬¦ä¸²å¯ä»¥ä½¿ç”¨\xNN.
    print("0x{x}\n", .{invalid_utf8[1]}); // ç´¢å¼•å®ƒä»¬ä¼šè¿”å›ç‹¬ç«‹çš„å­—èŠ‚
    print("0x{x}\n", .{"ğŸ’¯"[1]});
}
```

### è½¬ä¹‰å­—ç¬¦

| è½¬ä¹‰å­—ç¬¦     | å«ä¹‰                                           |
| ------------ | ---------------------------------------------- |
| `\n`         | æ¢è¡Œ                                           |
| `\r`         | å›è½¦                                           |
| `\t`         | åˆ¶è¡¨ç¬¦ Tab                                     |
| `\\`         | åæ–œæ  \                                       |
| `\'`         | å•å¼•å·                                         |
| `\"`         | åŒå¼•å·                                         |
| `\xNN`       | åå…­è¿›åˆ¶å…«ä½å­—èŠ‚å€¼ï¼Œ2 ä½                       |
| `\u{NNNNNN}` | åå…­è¿›åˆ¶ Unicode ç ç‚¹ UTF-8 ç¼–ç ï¼Œ1 ä½æˆ–è€…å¤šä½ |

### å¤šè¡Œå­—ç¬¦ä¸²

å¦‚æœè¦ä½¿ç”¨å¤šè¡Œå­—ç¬¦ä¸²ï¼Œå¯ä»¥ä½¿ç”¨ `\\`ï¼Œå¤šè¡Œå­—ç¬¦ä¸²æ²¡æœ‰è½¬ä¹‰ï¼Œæœ€åä¸€è¡Œè¡Œå°¾çš„æ¢è¡Œç¬¦å·ä¸ä¼šåŒ…å«åœ¨å­—ç¬¦ä¸²ä¸­ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š

```zig
const print = @import("std").debug.print;

pub fn main() !void {
    const hello_world_in_c =
        \\#include <stdio.h>
        \\
        \\int main(int argc, char **argv) {
        \\    printf("hello world\n");
        \\    return 0;
        \\}
    ;
    print("{s}\n", .{hello_world_in_c});
}
```

## å¥‡æŠ€æ·«å·§

å—ç›Šäº zig è‡ªèº«çš„è¯­è¨€ç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°æŸäº›å…¶ä»–è¯­è¨€æ‰€ä¸å…·å¤‡çš„æ–¹å¼æ¥æ“ä½œæ•°ç»„ã€‚

### ä½¿ç”¨å‡½æ•°åˆå§‹åŒ–æ•°ç»„

å¯ä»¥ä½¿ç”¨å‡½æ•°æ¥åˆå§‹åŒ–æ•°ç»„ï¼Œå‡½æ•°è¦æ±‚è¿”å›ä¸€ä¸ªæ•°ç»„çš„å…ƒç´ æˆ–è€…ä¸€ä¸ªæ•°ç»„ã€‚

```zig
const print = @import("std").debug.print;

pub fn main() !void {
    var array = [_]i32{make(3)} ** 10;
    print("{any}\n", .{array});
}

fn make(x: i32) i32 {
    return x + 1;
}
```

### ç¼–è¯‘æœŸåˆå§‹åŒ–æ•°ç»„

é€šè¿‡ç¼–è¯‘æœŸæ¥åˆå§‹åŒ–æ•°ç»„ï¼Œä»¥æ­¤æ¥æŠµæ¶ˆè¿è¡Œæ—¶çš„å¼€é”€ï¼

```zig
const print = @import("std").debug.print;

pub fn main() !void {
    var fancy_array = init: {
        var initial_value: [10]usize = undefined;
        for (&initial_value, 0..) |*pt, i| {
            pt.* = i;
        }
        break :init initial_value;
    };
    print("{any}\n", .{fancy_array});
}
```

è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ç¼–è¯‘æœŸçš„åŠŸèƒ½ï¼Œæ¥å¸®åŠ©æˆ‘ä»¬å®ç°è¿™ä¸ªæ•°ç»„çš„åˆå§‹åŒ–ï¼ŒåŒæ—¶è¿˜åˆ©ç”¨äº† `blocks` å’Œ `break` çš„æ€§è´¨ï¼Œå…³äºè¿™ä¸ªæˆ‘ä»¬ä¼šåœ¨ [å¾ªç¯](/basic/process_control/loop) è®²è§£ï¼
